name: Test

on:
  push:
    branches-ignore:
      - 'main' # This excludes the 'main' branch

jobs:
  test-syncversion-scripts:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set permissions
        run: chmod +x ./lib/bashunit

      - name: Test GITHUB_OUTPUT
        run: |
          echo "TEST_TEST=This is my tests" >> $GITHUB_OUTPUT
          
          echo "$GITHUB_OUTPUT"
          rm -f "$GITHUB_OUTPUT"
          echo "$GITHUB_OUTPUT"

      - name: Run tests
        working-directory: ./tests
        run: ../lib/bashunit ./unit/workflows/syncversion